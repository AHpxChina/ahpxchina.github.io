<!DOCTYPE html>

<html lang="en">
    <head>
    <meta charset="utf-8">
    <!--
        hexo-theme-suka © SukkaW
        GitHub: https://github.com/SukkaW/hexo-theme-suka
    -->

    <!-- ### Resource Hint ### -->

    <!-- ## DNS Prefetch ## -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

<!-- busuanzi -->

    <link rel="dns-prefetch" href="//busuanzi.ibruce.info">


<!-- comment -->







<!-- analytics -->







    <!-- ## Preload ## -->
    
    <!-- Busuanzi -->
    
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" as="script">







    <!-- ### Meta & Title & Info ### -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <meta name="renderer" content="webkit">

    <!-- Title -->
    <title>How to fix the problem that process.Exited handler will not execute | 楼窗晚风</title>

    <!-- Favicons -->
    <link rel="icon" type="image&#x2F;ico" href="/img/AIcon.png">

    <!-- ### Import File ### -->
    <link rel="stylesheet" href="/lib/spectre/spectre.min.css"><style>
    body {
        background-color: #f8f9fa;
    }

    a, a:visited {
        color: #0070ff;
    }

    a:active, a:focus, a:hover {
        color: #0070ff;
        opacity: .75;
    }

    #post-content a,
    #post-content a:hover,
    #post-content a:focus,
    #post-content a:visited {
        color: #005eb9;
        opacity: 1;
    }

    

    .post-entry .card-body a {
        color: #0070ff;
    }

    .avatar {
        background: #444;
    }

    .navbar-link,
    .navbar-link:visited,
    .timeline .timeline-item .timeline-icon.icon-lg {
        color: #0070ff;
    }

    .navbar-link:hover {
        color: #0070ff;
        opacity: .8;
    }

    #search-input .btn,
    #disqus_click_btn,
    #disqus-switch-to-direct,
    #disqus-loadmore-button {
        background: #727e96;
        border-color: #727e96;
        color: #fff;
    }

    #post-toc a.post-toc-link,
    #post-toc a.post-toc-link:visited,
    .share-menu.menu .menu-item>a {
        color: #727e96;
    }

    .share-menu.menu .menu-item>a:hover,
    .share-menu.menu .menu-item>a:focus,
    .share-menu.menu .menu-item>a:visited {
        color: #50596c;
        background: #f8f9fa;
        opacity: .85;
    }
</style><link rel="stylesheet" href="/css/style.min.css">










<script>
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(t){"use strict";t.loadCSS||(t.loadCSS=function(){});var e=loadCSS.relpreload={};if(e.support=function(){var e;try{e=t.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),e.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout(function(){t.rel="stylesheet",t.media="only x"}),setTimeout(a,3e3)},e.poly=function(){if(!e.support())for(var a=t.document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n];"preload"!==o.rel||"style"!==o.getAttribute("as")||o.getAttribute("data-loadcss")||(o.setAttribute("data-loadcss",!0),e.bindMediaToggle(o))}},!e.support()){e.poly();var a=t.setInterval(e.poly,500);t.addEventListener?t.addEventListener("load",function(){e.poly(),t.clearInterval(a)}):t.attachEvent&&t.attachEvent("onload",function(){e.poly(),t.clearInterval(a)})}"undefined"!=typeof exports?exports.loadCSS=loadCSS:t.loadCSS=loadCSS}("undefined"!=typeof global?global:this);
</script>

    <!-- ### Site Verification ### -->
    


    <meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="楼窗晚风"><meta name="msapplication-starturl" content="https://sinoahpx.github.io"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="楼窗晚风"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- ### The Open Graph & Twitter Card Protocol ### -->
    <meta property="og:title" content="How to fix the problem that process.Exited handler will not execute | 楼窗晚风"><meta property="og:site_name" content="楼窗晚风"><meta property="og:type" content="article"><meta property="og:url" content="https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/"><meta property="og:locale" content="en"><meta name="description" content="As the code below: var path &amp;#x3D; @&amp;quot;xxx.exe&amp;quot;;  var process &amp;#x3D; new Process &amp;#123;     StartInfo &amp;#x3D; new ProcessStartInfo     &amp;#123;         FileName &amp;#x3D; path     &amp;#125; &amp;#125;;  pr - AHpx - 楼窗晚风"><meta name="keywords" content="CSharp, coding, sharing"><meta property="article:published_time" content="2021-08-27T14:22:00.000Z"><meta property="article:modified_time" content="2022-12-03T04:34:25.435Z"><meta property="og:updated_time" content="2022-12-03T04:34:25.435Z"><meta property="article:author" content="AHpx"><meta property="article:tag" content="CSharp, coding, sharing"><meta name="twitter:card" content="summary">

    

    <!-- ### Canonical link ### -->
    <link rel="canonical" href="https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/">

    <meta name="generator" content="Hexo 5.4.2">

    <!-- ### Analytics ### -->
    







    <!-- ### Structured Data ### -->
    



<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/",
    "@type": "BlogPosting",
    "logo": "https://sinoahpx.github.io/img/AIcon.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/"
    },
    "headline": "How to fix the problem that process.Exited handler will not execute | 楼窗晚风",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://sinoahpx.github.io/img/AIcon.png"
    },
    
    "datePublished": "2021-08-27T14:22:00.000Z",
    "dateModified": "2022-12-03T04:34:25.435Z",
    "author": {
        "@type": "Person",
        "name": "AHpx",
        "image": {
            "@type": "ImageObject",
            "url": "https://q1.qlogo.cn/g?b=qq&amp;nk=2933170747&amp;s=640"
        },
        "description": "烟霭也似的遐思和怅惘。"
    },
    "publisher": {
        "@type": "Organization",
        "name": "楼窗晚风",
        "logo": {
            "@type": "ImageObject",
            "url": "https://sinoahpx.github.io/img/AIcon.png"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://sinoahpx.github.io/search?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "CSharp, coding, sharing",
    "description": "As the code below: var path &amp;amp;#x3D; @&amp;amp;quot;xxx.exe&amp;amp;quot;;  var process &amp;amp;#x3D; new Process &amp;amp;#123;     StartInfo &amp;amp;#x3D; new ProcessStartInfo     &amp;amp;#123;         FileName &amp;amp;#x3D; path     &amp;amp;#125; &amp;amp;#125;;  pr - AHpx - 楼窗晚风"
}
</script>



    <!-- ### Custom Head ### -->
    
</head>

    <body>
            

            <!-- ### Main content ### -->
            <!-- ## Header ##-->
<header>
    <h1 class="header-title text-center"><a href="/">楼窗晚风</a></h1>

    <p class="text-center header-slogan">
        
            
                烟霭也似的遐思和怅惘。
            
        
    </p>

    <nav class="navbar-section text-center">
    
        <a href="/" class="navbar-link">Home</a>
    
    
        <a href="/archives/" class="navbar-link">Archives</a>
    
    
    
        <a href="/about/" class="navbar-link">About</a>
    
        <a href="/links/" class="navbar-link">Friends</a>
    
    
    
</nav>
</header>

            
    <!-- ## Post ## -->
    <div class="post-container">
    <div id="post-card" class="card">
        
        <div class="card-item-container">
            <div class="card-inner-cell">
                <!-- # Post Header Info # -->
                <div class="card-header">
                    
    <h1 class="card-title h3 mb-2">How to fix the problem that process.Exited handler will not execute</h1>




<div class="post-header-info">
    <p class="post-header-info-left text-gray">
        <img class="author-thumb lazyload" data-src="https://q1.qlogo.cn/g?b=qq&amp;nk=2933170747&amp;s=640" src="/img/suka-lazyload.gif" alt="AHpx's Avatar">
        <span>2021-08-27</span>
        
            <span class="suka-devide-dot"></span>
            <a class="category-link" href="/categories/dev/">dev</a>
        
        
            <!-- Busuanzi Post Views -->
<span id="busuanzi_container_page_pv" hidden>
    <span class="suka-devide-dot"></span>
    <span></span>
    <span id="busuanzi_value_page_pv"></span>
    <span>Views</span>
</span>
        
        
    </p>
    <div class="post-header-info-right">
        
            <div class="dropdown dropdown-right">
<a class="dropdown-toggle" tabindex="0">Share the post</a>
<ul class="menu share-menu">
    <!-- Share Weibo -->
    
    <li class="menu-item">
        <a href="http://service.weibo.com/share/share.php?appkey=&title=How to fix the problem that process.Exited handler will not execute&url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/&pic=https://sinoahpx.github.io/img/AIcon.png&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">Share to Weibo</a>
    </li>
    

    <!-- Share Twitter -->
    
    <li class="menu-item">
        <a href="https://twitter.com/intent/tweet?text=How to fix the problem that process.Exited handler will not execute&url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/&via=AHpx" target="_blank" rel="external noopener noreferrer nofollow">Share to Twitter</a>
    </li>
    

    <!-- Share Facebook -->
    
    <li class="menu-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/" target="_blank" rel="external noopener noreferrer nofollow">Share to Facebook</a>
    </li>
    

    <!-- Share Google+ -->
    
    <li class="menu-item">
        <a href="https://plus.google.com/share?url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/" target="_blank" rel="external noopener noreferrer nofollow">Share to Google+</a>
    </li>
    

    <!-- Share LinkedIn -->
    
    <li class="menu-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/&title=楼窗晚风" target="_blank" rel="external noopener noreferrer nofollow">Share to LinkedIn</a>
    </li>
    

    <!-- Share QQ -->
    
    <li class="menu-item">
        <a href="http://connect.qq.com/widget/shareqq/index.html?site=楼窗晚风&title=楼窗晚风&summary=Movie, Rock, Book, Coding, My life&pics=https://sinoahpx.github.io/img/AIcon.png&url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/" target="_blank" rel="external noopener noreferrer nofollow"> Share to QQ</a>
    </li>
    

    <!-- Share Telegram -->
    
    <li class="menu-item">
        <a href="https://t.me/share/url?url=https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/&text=楼窗晚风" target="_blank" rel="external noopener noreferrer nofollow">Share to Telegram</a>
    </li>
    

    <!-- QRCode -->
    
    <li class="menu-item">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANQAAADUCAAAAADBtVLEAAADrUlEQVR42u3cwW7jMAxFUf//T7erbgKL71JJbca42cx0mjg6BkxRJDHHzwNfhyhRokSJehzqKF6v71m9/+xafz8vF3Dyvtfrnf2u/H5RooagVl9awcnnzxa9Wnz6LrROUaIGoVYXSYGA/Lxa9NnPNJicrk+UqC9CpQd3hVn9W3vBokQ9CNUNCDRBTqiU2IoSNRlVXaS6eAoU6XuqG0c+L0rURFT1YE/682PVJFGi/hEVi+6wuFk9wOlwSJLkj3Y9RIn6RxQt/Fd/J4nwbrOgcz1RoiagaCONBInqINgtzlQBY5ncihI1AEUS2RRAyE3oNB9I06CdpYsSdSGq2lRTckmT26pRkIo6NGiIEjUFlRrOJIlNwSEVRlNjrkqsRYmahCKJZmdBVWGFLpYMppyuSZSoAagqoU1FE9LkJk082myLB1hRooagyuZwY7G0mU2GP9Ihst2dFyXqIlRnI62+NB3iaLGFHFhxQitK1A2odFDrFOpTwZ8WRGnwECVqIqpTAOkWRTqNB9Iwj411UaIGocghbqfoSBtvqRmREmpRoiahqqJmamh3BorJAZMWfvBgsChRF6NoEKiS2wRJG22VNJNgJUrUN6DI8BMp3OwOUHUDkShRU1BVc4A+uKkZVjXX6A1DTThRooagSCJaPaCdw2AsnoRBkfJwKkrUEFR6wMmhjj7gdDNOAWer8CJK1AUosrGmBjJZ/DtDkuRaokRNQZHhD9JgSwfHTqONXP/0RogSNQSVYJ1NmQYDepCkQUKUqMko+tDTwcXYLDt6/+H8cp2iRA1ApQtUYPKe9JnqWrR5LkrUJBRNQukN6AyG7A424ugnStQNqO7wR3cIiiI7Db32cIgoUReiSIGFDkrRgigt8KQAIUrURFSnYNkZAlkFCHogJWvAWbooUReiSCAgg4zpM+/cvI90PUSJuhBVNbRpcbJbgOkUW95qEIgSdROKDnpUBRLaiO4cMlMiLUrURFQKEmnAg27A6X3phsZBElGiBqG6RQ+y+ZLCf2fgKv5elKgBKNIgoAVHMthBi5ndBFeUqCmo3WGOtDF2h/hTQksOoaJETUCRB5AW8NMmmwbwU/M7FkNFiRqCIkUXOsSRNlsyyE+b17GRLUrUjaj0gJPNtbPZkkHfFIBa086iRA1Dpc2WJq27NzANDYsS9U2oFAjI+0gjoCpYokETUaIGocjgBk1qSWN8p2ke1ylK1BAUGWxKmx8tbJJiTbXpl98lStQA1JNeokSJEiXqMa9fudwTT5BcPZkAAAAASUVORK5CYII=" alt="QRCode">
    </li>
    

</ul>
</div>
        
    </div>
</div>
                </div>
                <div class="card-body">
                    
                        
                        
                    
                    <article id="post-content">
                        <p>As the code below:</p>
<pre class="line-numbers language-cs" data-language="cs"><code class="language-cs">var path &#x3D; @&quot;xxx.exe&quot;;

var process &#x3D; new Process
&#123;
    StartInfo &#x3D; new ProcessStartInfo
    &#123;
        FileName &#x3D; path
    &#125;
&#125;;

process.Start();<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>If there’s a scenario that we need to detect if this process exited and execute handler, how would you like to implement it?</p>
<p>Let’s add a event handler for <code>process.Exited</code> event:</p>
<pre class="line-numbers language-cs" data-language="cs"><code class="language-cs">process.Exited +&#x3D; (_, _) &#x3D;&gt;
&#123;
    Console.WriteLine($&quot;&#96;Process exit with code &#123;process.ExitCode&#125;&#96;&quot;);
;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>Run our application, and the question is: the code above didn’t work properly, when the process that we started to exit, the <code>process.Exited</code> event handler didn’t execute.</p>
<p>So you will check the <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.exited?view=net-5.0">Document</a>, they say: <code>It raises the Exited event when the process exits because the EnableRaisingEvents property was set when the process was created. The Exited event handler displays process information.</code> So what if we set EnableRaisingEvents to <em>true</em>?</p>
<pre class="line-numbers language-cs" data-language="cs"><code class="language-cs">var process &#x3D; new Process
&#123;
    StartInfo &#x3D; new ProcessStartInfo
    &#123;
        FileName &#x3D; path
    &#125;,
    EnableRaisingEvents &#x3D; true
&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In the code above, we’ve set EnableRaisingEvents to <em>true</em>, but if we run the application again, the <code>process.Exited</code> event handler didn’t execute either, what we gonna do now?</p>
<p>If you care enough, you will find that when the executable file that we specified started success, our application end tho. On purpose to make our application won’t exit until the executable exited, we need to append the code below after the executable file started:</p>
<pre class="line-numbers language-cs" data-language="cs"><code class="language-cs">process.WaitForExit()<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>We just run the application again, the console output <code>Process exit with code &#123;process.ExitCode&#125;</code> is displayed successfully now.</p>

                    </article>
                    
    <blockquote class="post-license">
        <p>
            <strong>Author&nbsp;:&nbsp;AHpx</strong>
            <br>
            <strong>
            
                This blog is under a <a href="/creativecommons.html" target="_blank">CC BY-NC-SA 3.0 Unported License</a>
            </strong>
            <br>
            <strong>Link to this article&nbsp;:&nbsp;</strong><a href="https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/">https://sinoahpx.github.io/2021/08/27/How%20to%20fix%20the%20problem%20that%20process.Exited%20handler%20will%20not%20execute/</a>
        </p>
    </blockquote>



    <blockquote id="date-expire-notification" class="post-expired-notify">This article was last updated on <span id="date-expire-num"></span> days ago, and the information described in the article may have changed.</blockquote>
    <script>
    (function() {
        var dateUpdate = Date.parse("2022-12-03");
        var nowDate = new Date();
        var a = nowDate.getTime();
        var b = a - dateUpdate;
        var daysUpdateExpire = Math.floor(b/(24*3600*1000));
        if (daysUpdateExpire >= 120) {
            document.getElementById('date-expire-num').innerHTML = daysUpdateExpire;
        } else {
            document.getElementById('date-expire-notification').style.display = 'none';
        }
    })();
    </script>


<p class="post-footer-info mb-0 pt-0">Published at&nbsp;<time datetime="2021-08-27T14:22:00.000Z" itemprop="datePublished">2021-08-27</time>

    , Updated at&nbsp;<time datetime="2022-12-03T04:34:25.435Z" itemprop="dateModified">2022-12-03</time>

</p>
<p class="post-footer-info mb-0 pt-2">

<span class="post-categories-list mt-2">

<a class="post-categories-list-item" href='/categories/dev/'>dev</a>

</span>



<span class="post-tags-list mt-2">

<a class="post-tags-list-item" href="/tags/CSharp/" rel="tag">#&nbsp;CSharp</a>

</span>


</p>

                </div>
                <div class="post-nav px-2 bg-gray">
<ul class="pagination">
    <!-- Prev Nav -->
    
        <li class="page-item page-prev">
            <a href="/2022/04/13/Permanently%20add%20environment%20variables%20on%20Fedora%20linux/" rel="prev">
                <div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">Permanently add environment variables on Fedora linux</div>
            </a>
        </li>
    

    <!-- Next Nav -->
    
        <li class="page-item page-next">
            <a href="/2021/08/27/Dynamically%20convert%20JSON%20to%20CSharp%20object/" rel="next">
                <div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">Dynamically convert JSON to C# object(Chinese)</div>
            </a>
        </li>
    
</ul>
</div>

                
                    <!-- # Comment # -->
                    
                
            </div>
        </div>
    </div>
</div>

            <!-- ### Footer ### -->
            <footer class="text-center">
    <!-- footer copyright -->
    
        <p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span id="copyright-year"></span>
            <a class="footer-copyright-a" href="https://sinoahpx.github.io">楼窗晚风</a>
        </p>

    <!-- footer custom text -->
    <p class="footer-text mb-0">
    
    </p>
    <!-- footer develop info -->
    <p class="footer-develop mb-0">
        
    <!-- Busuanzi User Views -->
    <span id="busuanzi_container_site_uv" hidden>
        <span></span>
        <span id="busuanzi_value_site_uv"></span>
        <span>Viewers</span>
        
            <span>|</span>
        
    </span>




        
        Powered by&nbsp;<!--
         --><a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<!--
         --><a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a>
    </p>
</footer>


        <!-- ### Import File ### -->
        <!-- ### Footer JS Import ### -->

<script>

    
window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
};
document.getElementById('copyright-year').textContent = new Date().getFullYear();
console.log('\n %c Suka Theme (hexo-theme-suka) | © SukkaW | Verision 1.3.3 %c https://github.com/SukkaW/hexo-theme-suka \n', 'color: #fff; background: #444; padding:5px 0;', 'background: #bbb; padding:5px 0;');

</script>

<script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" async></script>


<!-- Offset -->




<!-- Comment -->


<!-- ### Custom Footer ### -->

    </body>

</html>